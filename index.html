<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">


    <link rel="stylesheet" href="css/spectre.min.css">
<link rel="stylesheet" href="css/spectre-exp.min.css">
<style media="screen">
  .card {margin-top: 3vh;height:94vh;}
</style>
    <title></title>
  </head>
  <body>

    <div class="container">
      <div class="columns">
        <div class="column col-6">

          <div class="card">

            <div class="card-header">
              <div class="card-title h5">QUESTIONS</div>

            </div>
            <div class="card-body">


              <div class="form-group">
                <label class="form-label" for="qfield">Questions</label>
                <textarea class="form-input" id="qfield" placeholder="COLLER" rows="6"></textarea>
              </div>
              <div class="form-group">
                <label class="form-label" for="reponsefield">Reponces</label>
                <textarea class="form-input" id="reponsefield" placeholder="COLLER" rows="6"></textarea>
              </div>


            </div>
            <div class="card-footer">

            </div>
          </div>


        </div>
        <div class="column col-6">

          <div class="card">

            <div class="card-header">
              <div class="card-title h5">PARAMETRES</div>

            </div>
            <div class="card-body">


              <div class="form-group">
                <label class="form-label" for="module">Module</label>
                <input class="form-input" type="text" id="module" placeholder="Module">
              </div>

              <div class="form-group">
                <label class="form-label" for="aneeAnnee">Annee</label>
   <select class="form-select " id="aneeAnnee">
<option value="2007">2007</option>
<option value="2008">2008</option>
<option value="2009">2009</option>
<option value="2010">2010</option>
<option value="2011">2011</option>
<option value="2012">2012</option>
<option value="2013">2013</option>
<option value="2014">2014</option>
<option value="2015">2015</option>
<option value="2016">2016</option>
<option value="2017">2017</option>
<option value="2018">2018</option>


     </select>
              </div>


              <div class="form-group">
                <label class="form-label" for="qType">Questions</label>
                <select class="form-select " id="qType">

                  <option value="1">1 -(ou) 1-/</option>
                  <option value="2">1 )(ou) 1)/</option>
                  <option value="3">1 :(ou) 1:/</option>
                  <option value="4">Q1  </option>
                  <option value="5">Q1 : </option>
                  <option value="5">Q1 - </option>
                  <option value="5">Q1 ) </option>




                  <option value="3">Question1  (ou) Question 1: (ou) </option>
                  <option value="4">QCM 1 (ou) QCM 1 :</option>
                </select>
              </div>


              <div class="form-group">
                <label class="form-label" for="ChoicesType">Choix</label>
                <select class="form-select" id="choicesType">
                  <option value="1">A.</option>
                  <option value="2">a.</option>
                  <option value="3">A-proposition</option>
                  <option value="4">A) proposition</option>
                  <option value="5">a) proposition</option>
                </select>
              </div>

<div id="resAlert">


</div>

            </div>
            <div class="card-footer">
              <button class="btn btn-success" onclick="submit()">Ajouter</button>

            </div>
          </div>





        </div>


      </div>
    </div>


<script type="text/javascript">

const qField = document.getElementById('qfield') ,
 reponseField = document.getElementById('reponsefield') ,
qType = document.getElementById('qType') ,
choicesType = document.getElementById('choicesType') ,
resAlert = document.getElementById('resAlert') ,
regQUestions = [
  null ,
  /[0-9*]+(\s?)+\-/gi,
  /[0-9*]+(\s?)+\)/gi,
  /[0-9*]+(\s?)+\:/gi,
  /[Q]+[0-9*]+(\s?)/gi,
  /[Q]+(\s?)+[0-9*]+(\s?)+\:/gi,
  /[Q]+[0-9*]+(\s?)+\-/gi,
  /[Q]+[0-9*]+(\s?)+\)/gi,


  /[0-9*]+(\)?)+(\s?)+(\.?)+(\-?)+(\:?)+(\/?)+(\s?)/gi,
  /[Q]+[0-9*]+(\s?)+(\)?)+(\:- )/gi,
  /[Question]+(\s?)+[0-9*]+(\s?)+(\:?)/gi,
  /[QCM]+(\s?)+[0-9*]+(\s?)+(\:?)/gi,
/*
  /[0-9]+\-/gi ,
  /[0-9]+\./gi,
  /[0-9]+\s+\:/gi,
  /[0-9]+\)+\s/gi,
  /[0-9]+\//gi,
  /[0-9]+\//gi,
  /[0-9]+\//gi,
  /[0-9*]+\)/gi,
  /[Q]+[0-9*]/gi,
  /[0-9*]+\s+\:/gi,

  /[0-9*]+\//gi,
  /[0-9*]+\-+\s+\-/gi,
  /[Q]+[0-9*]+\:/gi,
  /[Q]+[0-9*]+\-/gi,
  /[Question]+(\s?)+[0-9*]+(\s?)+(\:?)/gi,*/

];

const regChoices = [
  null ,
  /[A-G]+\.+(\s?)/gi,
  /[a-g]+\.+(\s?)/gi,
  /[A-G]+\-+(\s?)/gi,
  /[A-G]+\)+(\s?)/gi,
  /[a-g]+\)+(\s?)/gi,
]


function sdash(d) {
let pos = parseInt(qType.value);
console.log();
console.log(regQUestions[pos]);
  return d.toString().replace(regQUestions[pos], '##');
}





function submit(){
  let fs = firstSplit(qField.value) ,
  responces = splitResponces();

if (responces.length !== fs.length) {
  resAlert.innerHTML = `<div class="toast toast-error"> Erreur  : Questions ${fs.length}  / reponces ${responces.length}</div>`;
  return;
}
resAlert.innerHTML = '<span class="label label-rounded label-success">nombre des Questions '+fs.length+'</span>';



for (var i = 0; i < fs.length; i++) {
let qsss =   secondSplit(fs[i]) ,
qq = qsss[0] ;
qsss.shift();
choices = qsss;

console.log('question '+ qq);
console.log('responces '+ choices.join('*'));
console.log('truth '+ responces[i]);

}

}




function firstSplit(x){
  let qc = sdash(x).split('##') , qWc = [];
  if (qc && qc .length) {
for (var i = 0; i < qc.length; i++) {
if (qc[i].length >= 20)  qWc.push(qc[i])
}
  }
  return qWc;
}


function secondSplit(r){
  let pos = parseInt(choicesType.value);

  let questAndch = r.toString().replace(regChoices[pos], ';;').split(';;'),qWc = [];;
for (var i = 0; i < questAndch.length; i++) {
  qWc.push(questAndch[i]);
}
 return qWc;
}







function choix(d) {

  return d.toString().replace(/[a-f]\./gi, '&&');
}


function  splitResponces(){
  let rr = reponsefield.value.trim().split('\n'), responses =[];
  for (var i = 0; i < rr.length; i++) {
    if(rr[i].length > 0) responses.push(rr[i].replace('A',0).replace('B',1).replace('C',2).replace('D',3));
  }
return responses;
}




qField.value = `
Q1:	tous les examens suivants peuvent être pratiqués dans l’abcès du poumon sauf un :
a.	hémocultures répétées à chaque pic de fièvre
b.	échographie thoracique pour guider la ponction aspiration
c.	la fibroscopie bronchique
d.	le scanner thoracique
Q 2:	une des caractéristiques clinique suivantes fait penser à la DDB :
a.	bronchorrhée purulent surtout hivernale
b.	dyspnée d’effort
c.	infections parenchymateuses récidivantes de même siège
d.	syndrome pleurétique la compliquant ou la révélant
Q3:	le traitement de DDB est :
a.	médical seulement
b.	médico-chirurgical d'emblée
c.	chirurgical si la DDB est localisée
d.	chirurgical si l’hémoptysie dans la DDB est récidivante après embolisation
Q4:	parmi les propositions propositions suivantes une ne fait pas parti du syndrome de DEMON- MEIGS laquelle.
a.	Pleurésie avec taux de protéine pleurales est Sup >30 g/1
b.	Ascite
c.	Tumeur ovarienne
d.	Douleurs pelviennes
Q5:	dans la P.S.F Tuberculeuse la bascilloscopie est :
a.	positive en général dans l’expectoration
b.	nécessaire à rechercher dans les urines et le LCR.
c.	dans le liquide pleurai rarement positive au ZIEHL-NELSON
d.	généralement positive dans le liquide pleural à l’examen direct
Q6:	parmi les propositions suivantes des syndromes paranéoplasique, une a une origine neurologique autoimmune, laquelle :
a.	syndrome de Schawrtz-Barter
b.	pseudo-myasthénie ou syndrome de LAMBERT- EATON
c.	Acanthosis nigricans cutané
d.	Gynécomastie



`;
reponsefield.value = `
A
A
A
A
A
A


`;

</script>





  </body>
</html>
